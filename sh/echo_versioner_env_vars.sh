#!/bin/bash -Eeu

# - - - - - - - - - - - - - - - - - - - - - - - -
echo_versioner_env_vars()
{
  docker run --rm cyberdojo/versioner:latest
  echo CYBER_DOJO_WEB_SHA="$(image_sha)"
  echo CYBER_DOJO_WEB_TAG="$(image_tag)"

  #echo CYBER_DOJO_NGINX_SHA=279fa4b86e4ba744af5cb3064c2597c20bdeedf6
  #echo CYBER_DOJO_NGINX_TAG=279fa4b

  #echo CYBER_DOJO_MODEL_SHA=9b7d3118482160458ed18f2da5eeb0e2006345d6
  #echo CYBER_DOJO_MODEL_TAG=9b7d311

  #echo CYBER_DOJO_DIFFER_SHA=1b8090ca15420bc16d2b36f704f6505ce0a40251
  #echo CYBER_DOJO_DIFFER_TAG=1b8090c
}

# - - - - - - - - - - - - - - - - - - - - - - - -
image_name()
{
  echo "${CYBER_DOJO_WEB_IMAGE}"
}

# - - - - - - - - - - - - - - - - - - - - - - - -
image_sha()
{
  echo "$(cd "${ROOT_DIR}" && git rev-parse HEAD)"
}

# - - - - - - - - - - - - - - - - - - - - - - - -
image_tag()
{
  local -r sha="$(image_sha)"
  echo "${sha:0:7}"
}
