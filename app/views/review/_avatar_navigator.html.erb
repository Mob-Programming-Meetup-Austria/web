<script type="text/javascript"><!--
'use strict';
$(() => {

  const review = cd.review;

  review.refreshAvatarNavigator = (params) => {
    if (params.avatarIndex != '') {
      $('#avatar-navigator').show();
      const $box = $('#review-avatar-image-box').html($makeAvatarImage(params.avatarIndex));
      refreshAvatar($('#prev-avatar'), params.prevAvatarId);
      cd.setupAvatarNameHoverTip($box, '', params.avatarIndex, '');
      refreshAvatar($('#next-avatar'), params.nextAvatarId);
    }
  };

  // - - - - - - - - - - - - - - - - - - - - - - - -
  const moveToAvatar = (id) => {
    review.params.id = id;
    const index = review.inDiffMode() ? FirstIndex : LastIndex;
    review.moveToTrafficLight(index);
  };
  const FirstIndex = 1;
  const LastIndex = -1;

  // - - - - - - - - - - - - - - - - - - - - - - - -
  const $makeAvatarImage = (avatarIndex) => {
    return $('<img>', {
      class:'avatar-image',
        src:`/images/avatars/${avatarIndex}.jpg`
    });
  };

  // - - - - - - - - - - - - - - - - - - - - - - - -
  const refreshAvatar = (button, id) => {
    button
      .attr('disabled', id === '')
      .unbind('click')
      .bind('click', () => moveToAvatar(id));
  };

});
//--></script>

<span id="avatar-navigator" style="display:none;">
  <button id="prev-avatar" class="triangle button">
    <img src="/images/triangle_prev.gif"
         alt="move to previous avatar"/>
  </button>
  <div id="review-avatar-image-box"></div>
  <button id="next-avatar" class="triangle button">
    <img src="/images/triangle_next.gif"
         alt="move to next avatar"/>
  </button>
</span>
