
<%= render partial: 'starting_info' %>
<%= render partial: 'shared/hover_tip_container' %>
<%= render partial: 'shared/app_bar' %>
<div id="review-page"><%= render partial: 'review/review' %></div>
<div id="kata-page"><%= render partial: 'view_test' %></div>

<script type="text/javascript">
'use strict';
$(() => {

  cd.kataId = () => "<%= @id %>";
  cd.codeMirror.resetTheme();
  cd.kata.tabs.setup({repl:"<%= @env['REPL'] %>"});

  cd.loadInitialFiles(); // TODO. Pass @files here
  cd.kata.editor.output("<%= j raw(@stdout) %>", "<%= j raw(@stderr) %>", "<%= j raw(@status) %>");
  cd.kata.filenames.refresh();

  cd.turnOnSettingsButton();
  cd.loadInitialTrafficLights();
  cd.updateTrafficLightsCount();
  cd.scrollLastTrafficLightIntoView();
  cd.updateIndex("<%= @index %>");

  cd.showStartingInfoDialog("<%= @env['STARTING_INFO_DIALOG'] %>");

});
</script>
